<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon.png">
	<meta name="viewport" content="width=device-width">
	<title>Commit generator</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://kit-pro.fontawesome.com/releases/v5.10.2/css/pro.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/4.4.0/font/octicons.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css"/>
	<style>.btn:focus{box-shadow:none!important}.custom-control-input:focus~.custom-control-label::before,.custom-control-input:focus:not(:checked)~.custom-control-label::before,.custom-file-input:focus~.custom-file-label,.custom-select:focus{border-color:#343a40;box-shadow:0 0 0 0.2rem #343a4040}
	.custom-control-input:not(:disabled):active~.custom-control-label::before,.custom-control-input:checked~.custom-control-label::before{border-color:#343a40;background-color:#343a40}

	.blr-0,.bl-0{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.blr-0,.br-0{border-top-right-radius:0!important;border-bottom-right-radius:0!important}

	.mega-octicon,.octicon{font:inherit;font-style:normal;font-variant:normal;font-family:Octicons;}#notfound{position:relative;height:100vh}#notfound .notfound{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.notfound{max-width:520px;width:100%;text-align:center;line-height:1.4}.notfound .notfound-404{height:190px}.notfound .notfound-404 h1{font-family:Montserrat,sans-serif;font-size:146px;font-weight:700;margin:0;color:#232323}.notfound .notfound-404 h1>span{display:inline-block;width:120px;height:120px;background-image:url(/img/404_emoji.webp);background-size:cover;-webkit-transform:scale(1.4);-ms-transform:scale(1.4);transform:scale(1.4);z-index:-1}.notfound h4{font-family:Montserrat,sans-serif;font-size:22px;font-weight:700;margin:0;text-transform:uppercase;color:#232323}.notfound p{font-family:Montserrat,sans-serif;color:#787878;font-weight:300}.notfound a:not(.btn){font-family:Montserrat,sans-serif;display:inline-block;padding:12px 30px;font-weight:700;background-color:#24292e;color:#fff;border-radius:40px;text-decoration:none;-webkit-transition:.2s all;transition:.2s all}.notfound a:not(.btn):hover{opacity:.8}@media only screen and (max-width:767px){.notfound .notfound-404{height:115px}.notfound .notfound-404 h1{font-size:86px}.notfound .notfound-404 h1>span{width:86px;height:86px}}.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}.vdp-datepicker input{display:none}</style>
</head>
<body>
	<a href="https://github.com/jco666/commit-generator" class="github-corner" target="_blank" title="View source on Github">
		<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>
	</a>
	<div class="container h-100" id="app">
		<noscript><div class="alert alert-info mt-5"><i class="octicon octicon-info"></i> This website need javascript to run.</div></noscript>
		<router-view></router-view>
	</div>

	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
	
	<script src="https://unpkg.com/vuejs-datepicker"></script>
	<script src="https://unpkg.com/vue2-storage@4.0.5/dist/vue2-storage.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

	<script>
function ttp(){
	$('[data-toggle="tooltip"]').tooltip()
}
function hideTtp(){
	$('[data-toggle="tooltip"]').tooltip('hide')
}
function route(path='/',component={}){
	return { path: path, component: component }
}

Vue.use(Vue2Storage,{
	prefix: 'app_',
	driver: 'local'
})

app = new Vue({
	data:{
		
	},
	methods:{
		
	},
	router: new VueRouter({
		mode: 'history',
		hash: false,
		routes: [
			route('/',{
				template:`<div class="mt-5 text-center" style="padding-top:7%">
							<h1 class="mb-3" style="color:#06f"><i class="octicon octicon-git-commit"></i> Commit generator</h1>
							<h6 class="mt-3 mb-5" style="color:#999">Commit your way !</h6>
							<div v-if="configs.showDays" class="form-row mb-3">
								<h4 v-for="(item, index) in Object.values(days).slice(-7)" class="mr-4" :style="{color:[index%2?colors[0]:colors[1]]}">{{Object.keys(days).slice(-7)[index]}} ({{item}})</h4>
								<!--<h4 class="mr-2" style="color:MediumSeaGreen">Thu, 12</h4>
								<h4 class="mr-2" style="color:tomato">Thu, 13</h4>-->
							</div>
							<div class="form-row justify-content-center align-items-center">
								<div class="col-10 col-sm-12 my-1">
									<div class="input-group">
									<vuejs-datepicker v-model="date"></vuejs-datepicker>
										<span class="input-group-btn"><button @click="back" type="button" class="btn btn-dark br-0" data-toggle="tooltip" data-placement="bottom" data-original-title="Back 1 day"><i class="zmdi zmdi-neg-1"></i></button><button @click="showCalendar" type="button" class="btn btn-dark blr-0" data-toggle="tooltip" data-placement="bottom" data-original-title="Set new date"><i class="fal fa-calendar-alt"></i></button><button @click="advance" type="button" class="btn btn-dark blr-0"" data-toggle="tooltip" data-placement="bottom" data-original-title="Advance 1 day"><i class="zmdi zmdi-plus-1"></i></button><button @click="newCommit(1)" data-clipboard-text data-clipboard-target="#commit" type="button" class="btn btn-dark blr-0"" data-toggle="tooltip" data-placement="bottom" data-original-title="Get a new commit and copy"><i class="fal fa-sync"></i></button><button data-clipboard-text data-clipboard-target="#commit" type="button" class="btn btn-dark blr-0"" data-toggle="tooltip" data-placement="bottom" data-original-title="Copy commit to clipboard."><i class="fal fa-copy"></i></button><button @click="toogleOptions" :class="{active:configs.options}" type="button" class="btn btn-dark blr-0"" data-toggle="tooltip" data-placement="bottom" :data-original-title="configs.optionsLabel"><i class="fal fa-ellipsis-h-alt"></i></button></span>
										<input v-model="commit" style="border-radius:.25rem" class="form-control bl-0" placeholder="git commit -m 'Commit message'" id="commit" onfocus="this.select()">
									</div>
								</div>
							</div>
							<div v-if="configs.options" class="form-row">
								<div class="col-10 col-sm-2 mt-2 my-3 ml-2 px-0">
									<div class="custom-control custom-switch pl-1">
										<input type="checkbox" class="custom-control-input" id="rmsg" v-model="configs.rmsg">
										<label class="custom-control-label" for="rmsg">Random message</label>
									</div>
								</div>
								<div v-if="!configs.rmsg" class="col-10 col-sm-2 mt-2 mr-4 px-0">
									<input type="text" class="form-control" placeholder="Commit message" v-model="configs.msg" id="msg">
								</div>
								<div class="col-10 col-sm-2 mt-2 my-3 px-0">
									<div class="custom-control custom-switch pl-1">
										<input type="checkbox" class="custom-control-input" id="rdate" v-model="configs.rdate">
										<label class="custom-control-label" for="rdate">Random date</label>
									</div>
								</div>
								<div v-if="!configs.rdate" class="col-10 col-sm-2 mt-2 mr-2 px-0">
									<input type="text" class="form-control" placeholder="Commit date" v-model="configs.dateFormated" id="date">
								</div>
								<div class="col-10 col-sm-2 mt-2 my-1 ml-2 mr-4 px-0">
									<select :value="configs.format" @change="setFormat($event.target.value)" class="custom-select">
										<option value="0" disabled>Date format</option>
										<option value="1">Timestamp</option>
										<option value="2">ISO 8601</option>
										<option value="3">RFC 2822</option>
									</select>
								</div>
								<div class="col-10 col-sm-1 mt-2 my-3 ml-3 px-0">
									<div class="custom-control custom-checkbox pl-0">
										<input type="checkbox" class="custom-control-input" v-model="configs.gad" id="gad">
										<label class="custom-control-label" for="gad">Author date</label>
									</div>
								</div>
								<div class="col-10 col-sm-2 mt-2 my-3 ml-2 px-0">
									<div class="custom-control custom-checkbox pl-0">
										<input type="checkbox" class="custom-control-input" v-model="configs.gcd" id="gcd">
										<label class="custom-control-label" for="gcd">Committer date</label>
									</div>
								</div>
								<div class="col-10 col-sm-2 mt-2 my-3 ml-2 px-0">
									<div class="custom-control custom-checkbox pl-0">
										<input type="checkbox" class="custom-control-input" v-model="configs.showDays" id="showDays">
										<label class="custom-control-label" for="showDays">Count date</label>
									</div>
								</div>
							</div>
						</div>`,
				data(){
					return {
						colors:[this.getRandomColor(),this.getRandomColor()],
						days:{},
						commit:'',
						date:new Date(),
						dateFormat:'',
						configs:this.$storage.get('configs',{
							showDays:0,
							msg:'',
							dateFormated:'',
							format:2,
							options:0,
							optionsLabel:'Show advanced opitions',
							rmsg:1,
							rdate:1,
							gad:1,
							gcd:1,
						})
					}
				},
				methods:{
					getRandomColor(){
						var letters='0123456789ABCDEF', color = '#8';
						for (var i=0;i<5;i++){
							color += letters[Math.floor(Math.random() * 16)];
						}
						return color;
					},
					aday(day){
						this.days[day] = this.days[day] ? ++this.days[day] : 1;
					},
					sl(name,value){
						this.$storage.set(name,value,{ttl:1571540807106})
					},
					sd(v){
						this.date = new Date(this.date.setDate(v));
					},
					back(){
						hideTtp();
						this.sd(this.date.getDate() - 1);
					},
					advance(){
						hideTtp();
						this.sd(this.date.getDate() + 1);
					},
					showCalendar(){
						hideTtp();hideTtp();
						this.$children[0].showCalendar();
					},
					toogleOptions(){
						this.configs.options=!this.configs.options;
						this.configs.optionsLabel=`${this.configs.options?'Hide':'Show'} advanced opitions`;
						(ttp=document.querySelector(".tooltip.show .tooltip-inner"))&&(ttp.innerHTML=this.configs.optionsLabel);
						hideTtp();
					},
					setFormat(id){
						this.configs.format!=id&&(this.configs.format=id);
						this.dateFormat = id == '1' ? 'X' : (id == '2' ? 'YYYY-MM-DDT:timeZZ' : 'ddd, DD MMM YYYY :time ZZ');
						this.newCommit(1);
					},
					newCommit(nn=0){
						hideTtp();
						if(this.configs.rdate && (!this.configs.dateFormated || nn))
							this.configs.showDays&&this.aday(moment(this.date).format('ddd, DD')),this.configs.dateFormated = moment(this.date).format(this.dateFormat.replace(new RegExp("(?:(\:time))","g"), this.randHMS()));
						if(this.configs.rmsg && (!this.configs.msg || nn))
							this.configs.msg = Math.random().toString(16).slice(2);
						this.commit = `git add -A && ${this.configs.gad ? `GIT_AUTHOR_DATE='${this.configs.dateFormated}' `:''}${this.configs.gcd ? `GIT_COMMITTER_DATE='${this.configs.dateFormated}' `:''}git commit -m '${this.configs.msg}'`
					},
					randHMS(delimiter=':'){
						//return `${this.getRandomInt(8,19)}${delimiter}${this.getRandomInt(1,59)}${delimiter}${this.getRandomInt(1,59)}`
						return this.getRandomInt(8,19)+delimiter+this.getRandomInt(1,59)+delimiter+this.getRandomInt(1,59)
					},
					getRandomInt(min, max){
						min = Math.ceil(min);
						max = Math.floor(max);
						num = Math.floor(Math.random() * (max - min + 1)) + min;
						return num < 10 ? '0'+num:num;
					}
				},
				watch: {
					date(date){
						this.newCommit(1)
					},
					configs:{
						handler(val){
							this.sl('configs',val)
						},
						deep: true
					},
					'configs.rmsg':function(val){
						if(!val){
							setTimeout(()=>{document.getElementById('msg').focus()},50);
							return;
						}
						this.newCommit(1);
					},
					'configs.rdate':function(val){
						if(!val){
							setTimeout(()=>{document.getElementById('date').focus()},50);
							return;
						}
						this.newCommit(1);
					},
					'configs.gad':function(val){
						this.newCommit()
					},
					'configs.gcd':function(val){
						this.newCommit()
					}
				},
				mounted(){
					ttp();
					this.setFormat(this.configs.format);
					new ClipboardJS('[data-clipboard-text]');
				},
				components:{vuejsDatepicker}
			}),
			route('*',{template:'<div id="notfound"><div class="notfound"><div class="notfound-404"><h1>4<span></span>4</h1></div><h4>Oops! Page Not Be Found</h4><p>Sorry but the page you are looking for does not exist, have been removed. name changed or is temporarily unavailable</p><router-link to="/"><i class="fas fa-arrow-circle-left"></i> Back to homepage</router-link></div></div>'})
		]
	}),
}).$mount('#app')
	</script>
</body>
</html>